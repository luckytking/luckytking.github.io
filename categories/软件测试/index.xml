<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>è½¯ä»¶æµ‹è¯• on jefffff&#39;s Blog</title>
    <link>https://luckytking.github.io/categories/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/</link>
    <description>Recent content in è½¯ä»¶æµ‹è¯• on jefffff&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sun, 19 Mar 2023 16:09:13 +0800</lastBuildDate><atom:link href="https://luckytking.github.io/categories/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Gorå’ŒApisixProxyMirrorå®ç°æ•è·å¤åˆ¶æµé‡</title>
      <link>https://luckytking.github.io/2023/03/gor%E5%92%8Capisixproxymirror%E5%AE%9E%E7%8E%B0%E6%8D%95%E8%8E%B7%E5%A4%8D%E5%88%B6%E6%B5%81%E9%87%8F/</link>
      <pubDate>Sun, 19 Mar 2023 16:09:13 +0800</pubDate>
      
      <guid>https://luckytking.github.io/2023/03/gor%E5%92%8Capisixproxymirror%E5%AE%9E%E7%8E%B0%E6%8D%95%E8%8E%B7%E5%A4%8D%E5%88%B6%E6%B5%81%E9%87%8F/</guid>
      <description>&lt;p&gt;åœ¨ä¸Šä¸€ç¯‡  &lt;a href=&#34;https://luckytking.github.io/2022/11/go%E7%BD%91%E7%BB%9C%E6%8A%93%E5%8C%85%E5%BC%95%E6%B5%81%E5%B7%A5%E5%85%B7goreplay/&#34;&gt;Goç½‘ç»œæŠ“åŒ…ã€å¼•æµå·¥å…·GoReplay&lt;/a&gt; ä»‹ç»äº†Gorçš„ä¸€äº›åŸºç¡€å’Œå®é™…å¼€å‘ä¸­å¯¹ HTTP æµé‡è¿›è¡Œå¤åˆ¶ï¼Œä»¥ç”¨äºæµ‹è¯•ã€æ€§èƒ½ç›‘æµ‹ç­‰ç”¨é€”ã€‚è€ŒApache APISIX æ˜¯ Apache è½¯ä»¶åŸºé‡‘ä¼šä¸‹çš„äº‘åŸç”Ÿ API ç½‘å…³ï¼Œå®ƒå…¼å…·åŠ¨æ€ã€å®æ—¶ã€é«˜æ€§èƒ½ç­‰ç‰¹ç‚¹ï¼Œæä¾›äº†è´Ÿè½½å‡è¡¡ã€åŠ¨æ€ä¸Šæ¸¸ã€ç°åº¦å‘å¸ƒï¼ˆé‡‘ä¸é›€å‘å¸ƒï¼‰ã€æœåŠ¡ç†”æ–­ã€èº«ä»½è®¤è¯ã€å¯è§‚æµ‹æ€§ç­‰ä¸°å¯Œçš„æµé‡ç®¡ç†åŠŸèƒ½ã€‚ç»“åˆä½¿ç”¨ Gor å’Œ Apisix å¯ä»¥è½»æ¾åœ°å®ç°æµé‡å¤åˆ¶ï¼Œå¹¶å°†å…¶åº”ç”¨äºå„ç§åœºæ™¯ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡æ–‡ç« å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ Gor å’Œ Apisix å®ç°æµé‡å¤åˆ¶ï¼Œå…·ä½“åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æµ‹è¯•ç¯å¢ƒä»‹ç»&lt;/li&gt;
&lt;li&gt;å®‰è£…å’Œé…ç½® Gor&lt;/li&gt;
&lt;li&gt;å®‰è£…å’Œé…ç½® Apisix&lt;/li&gt;
&lt;li&gt;é…ç½® Apisix çš„ proxy-mirror æ’ä»¶&lt;/li&gt;
&lt;li&gt;æµ‹è¯•æµé‡å¤åˆ¶&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;æµ‹è¯•ç¯å¢ƒä»‹ç»&#34;&gt;æµ‹è¯•ç¯å¢ƒä»‹ç»&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;OS: ä¸¤å° Ubuntu è™šæ‹Ÿæœºï¼ˆGatewayã€Nodeï¼‰
&lt;blockquote&gt;
&lt;p&gt;a.  Gateway å®‰è£… ApiSix&lt;/p&gt;
&lt;p&gt;b.  Node å®‰è£…èŠ‚ç‚¹æœåŠ¡&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;Docker &amp;amp; DockerCompose&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;å®‰è£…å’Œé…ç½®-gor&#34;&gt;å®‰è£…å’Œé…ç½® Gor&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆï¼Œéœ€è¦åœ¨Nodeä¸Šå®‰è£… Gor å·¥å…·ã€‚å¯ä»¥ä» Gor çš„&lt;a href=&#34;https://apisix.apache.org/zh/docs/apisix/installation-guide/&#34;&gt;å®˜ç½‘ä¸‹è½½&lt;/a&gt;ç›¸åº”çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç„¶åå°†å…¶è§£å‹åˆ°æœåŠ¡å™¨ä¸Šå³å¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# tar xvf gor_1.3.3_x64.tar.gz&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# cp gor /usr/local/bin/gor&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# sudo chmod +x /usr/local/bin/gor&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®‰è£…å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ Gorï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# gor version&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¾“å‡º&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# Version:1.3.0 
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;å®‰è£…å’Œé…ç½®-apisix&#34;&gt;å®‰è£…å’Œé…ç½® Apisix&lt;/h3&gt;
&lt;p&gt;ApiSix: è¿™é‡Œä½¿ç”¨ DockerComposeå®‰è£…&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;git clone &lt;a href=&#34;https://github.com/apache/apisix-docker.git&#34;&gt;https://github.com/apache/apisix-docker.git&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;cd apisix-docker/example&lt;/p&gt;
&lt;p&gt;docker-compose up -d&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™ä¸ªå‘½ä»¤ä¼šå¯åŠ¨ Apisix å¹¶ç›‘å¬åœ¨æœ¬åœ°çš„ 80 ç«¯å£ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é…ç½®-apisix-çš„-proxy-mirror-æ’ä»¶&#34;&gt;é…ç½® Apisix çš„ proxy-mirror æ’ä»¶&lt;/h3&gt;
&lt;p&gt;Apisix çš„ proxy-mirror æ’ä»¶å¯ä»¥ç”¨äºæµé‡å¤åˆ¶ã€‚
å¢åŠ ä¸€ä¸ªè·¯ç”±hello-proxy-mirror, Upstreamä¸ºNodeä¸»æœºçš„æœåŠ¡A(ç«¯å£9696)ï¼Œæµé‡å¤åˆ¶åˆ°Nodeä¸»æœºçš„æœåŠ¡B(ç«¯å£9797)ï¼Œå…¶ä¸­&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;host ä¸º æŒ‡å®šé•œåƒæœåŠ¡åœ°å€&lt;/li&gt;
&lt;li&gt;sample_ratio é•œåƒè¯·æ±‚é‡‡æ ·ç‡ï¼Œæœ¬ä¾‹ä¸­ä¸º1ï¼Œè¡¨ç¤ºå…¨é‡å¤åˆ¶&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;{
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;uri&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/hello&amp;#34;&lt;/span&gt;,
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello-proxy-mirror&amp;#34;&lt;/span&gt;,
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;methods&amp;#34;&lt;/span&gt;: [
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GET&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;POST&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PUT&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DELETE&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PATCH&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;HEAD&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OPTIONS&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;CONNECT&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;TRACE&amp;#34;&lt;/span&gt;
  ],
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;plugins&amp;#34;&lt;/span&gt;: {
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;proxy-mirror&amp;#34;&lt;/span&gt;: {
      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;disable&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;,
      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;host&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;http://192.168.1.101:9797&amp;#34;&lt;/span&gt;,
      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;sample_ratio&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
    }
  },
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;upstream&amp;#34;&lt;/span&gt;: {
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;nodes&amp;#34;&lt;/span&gt;: [
      {
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;host&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;192.168.1.101&amp;#34;&lt;/span&gt;,
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;port&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;9696&lt;/span&gt;,
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;weight&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
      }
    ],
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;timeout&amp;#34;&lt;/span&gt;: {
      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;connect&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;,
      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;send&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;,
      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;read&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;
    },
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;roundrobin&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;scheme&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;http&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;pass_host&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pass&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;keepalive_pool&amp;#34;&lt;/span&gt;: {
      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;idle_timeout&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;60&lt;/span&gt;,
      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;requests&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;,
      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;size&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;320&lt;/span&gt;
    }
  },
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;status&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªé…ç½®ä¼šå¼€å¯ proxy-mirror æ’ä»¶ï¼Œå¹¶å°†å…¶é…ç½®ä¸ºå°†æµé‡å‘é€åˆ°æœ¬åœ°çš„ 8080 ç«¯å£ï¼Œå³ Gor ç›‘å¬çš„åœ°å€ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æµ‹è¯•æµé‡å¤åˆ¶&#34;&gt;æµ‹è¯•æµé‡å¤åˆ¶&lt;/h3&gt;
&lt;p&gt;æ¥ç€å¯å¼€å§‹æµ‹è¯•æµé‡å¤åˆ¶ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å¯åŠ¨-http-æœåŠ¡aç›‘å¬9696ç«¯å£&#34;&gt;å¯åŠ¨ HTTP æœåŠ¡Aç›‘å¬9696ç«¯å£ï¼š&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;python3 -m http.server &lt;span style=&#34;color:#ae81ff&#34;&gt;9696&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£å¸¸å¯åŠ¨è¾“å‡º&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Serving HTTP on 0.0.0.0 port 9696 (http://0.0.0.0:9696/) ...
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;å¯åŠ¨-é•œåƒæœåŠ¡bç›‘å¬9797ç«¯å£&#34;&gt;å¯åŠ¨ é•œåƒæœåŠ¡Bç›‘å¬9797ç«¯å£ï¼š&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;python3 -m http.server &lt;span style=&#34;color:#ae81ff&#34;&gt;9797&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£å¸¸å¯åŠ¨è¾“å‡º&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Serving HTTP on 0.0.0.0 port 9797 (http://0.0.0.0:9797/) ...
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;å¯åŠ¨-gor-ç›‘å¬åœ¨æœ¬åœ°çš„-9797-ç«¯å£&#34;&gt;å¯åŠ¨ Gor ç›‘å¬åœ¨æœ¬åœ°çš„ 9797 ç«¯å£&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo gor --input-raw :9797 --output-stdout  
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ­¤å‘½ä»¤å°†ç›‘å¬é•œåƒæœåŠ¡Bç«¯å£9797ï¼Œ å°† HTTP æµé‡è¾“å‡ºåˆ°æ§åˆ¶å°&lt;/p&gt;
&lt;p&gt;æ¥ç€ï¼Œcurlæµ‹è¯•&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-curl&#34; data-lang=&#34;curl&#34;&gt;curl http://192.168.1.100:80/hello -i
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¾“å‡º&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;HTTP/1.1 404 File not found
Content-Type: text/html;charset=utf-8
Content-Length: 469
Connection: keep-alive
Date: Sun, 19 Mar 2023 06:55:42 GMT
Server: APISIX/3.2.0

&amp;lt;!DOCTYPE HTML PUBLIC &amp;quot;-//W3C//DTD HTML 4.01//EN&amp;quot;
        &amp;quot;http://www.w3.org/TR/html4/strict.dtd&amp;quot;&amp;gt;
&amp;lt;html&amp;gt;
    &amp;lt;head&amp;gt;
        &amp;lt;meta http-equiv=&amp;quot;Content-Type&amp;quot; content=&amp;quot;text/html;charset=utf-8&amp;quot;&amp;gt;
        &amp;lt;title&amp;gt;Error response&amp;lt;/title&amp;gt;
    &amp;lt;/head&amp;gt;
    &amp;lt;body&amp;gt;
        &amp;lt;h1&amp;gt;Error response&amp;lt;/h1&amp;gt;
        &amp;lt;p&amp;gt;Error code: 404&amp;lt;/p&amp;gt;
        &amp;lt;p&amp;gt;Message: File not found.&amp;lt;/p&amp;gt;
        &amp;lt;p&amp;gt;Error code explanation: HTTPStatus.NOT_FOUND - Nothing matches the given URI.&amp;lt;/p&amp;gt;
    &amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æµ‹è¯•ä¼šå‘é€ä¸€ä¸ª HTTP è¯·æ±‚åˆ°Apisixå¼€æ”¾çš„Httpç«¯å£80ï¼Œå¯ä»¥åˆ°è¾¾ä¸‹æ¸¸æœåŠ¡ï¼ˆNodeä¸»æœºçš„ServerA 9696ç«¯å£ï¼‰ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;192.168.1.100 - - [19/Mar/2023 06:47:44] code 404, message File not found
192.168.1.100 - - [19/Mar/2023 06:47:44] &amp;quot;GET /hello HTTP/1.1&amp;quot; 404 -
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è€Œä¸”ï¼ŒApiSix Proxy Mirrorå¤åˆ¶Httpè¯·æ±‚åˆ°ç«¯å£ 9797çš„é•œåƒæœåŠ¡ï¼Œ è¾“å‡ºå¦‚ä¸‹:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;192.168.1.100 - - [19/Mar/2023 06:49:07] code 404, message File not found
192.168.1.100 - - [19/Mar/2023 06:49:07] &amp;quot;GET /hello HTTP/1.1&amp;quot; 404 -
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯è§å’Œç›®æ ‡æœåŠ¡çš„çš„å®Œå…¨ä¸€è‡´ã€‚ 
æ¥ç€ï¼Œè§‚å¯ŸGoræ˜¯å¦æ­£å¸¸è®°å½•httpè¯·æ±‚ï¼Œæ­£å¸¸è¾“å‡ºå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; af0c2645c0a801c7399d6efb &lt;span style=&#34;color:#ae81ff&#34;&gt;1679212462567906772&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
GET /hello HTTP/1.1
Host: 192.168.1.100
Connection: close
User-Agent: curl/7.64.1
Accept: */*
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯´æ˜Gorå·²ç»æˆåŠŸä»é•œåƒæœåŠ¡æ•è·æµé‡ã€‚
å†ç»“åˆä½¿ç”¨Gorçš„æµé‡å›æ”¾åŠŸèƒ½å¯ä»¥åº”ç”¨äºä¾‹å¦‚æµ‹è¯•ã€æ€§èƒ½ç›‘æµ‹ç­‰åœºæ™¯ã€‚ 
ä»¥ä¸Šã€‚&lt;/p&gt;
&lt;h3 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://apisix.apache.org/zh/docs/apisix/getting-started&#34;&gt;ApiSix Wiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://625a9090d04b9a6953165811--2-11-old-docs-apache-apisix.netlify.app/zh/docs/apisix/plugins/proxy-mirror&#34;&gt;Proxy Mirror&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://luckytking.github.io/2022/11/go%E7%BD%91%E7%BB%9C%E6%8A%93%E5%8C%85%E5%BC%95%E6%B5%81%E5%B7%A5%E5%85%B7goreplay/&#34;&gt;goç½‘ç»œæŠ“åŒ…å¼•æµå·¥å…· &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
    <item>
      <title>Goç½‘ç»œæŠ“åŒ…ã€å¼•æµå·¥å…·GoReplay</title>
      <link>https://luckytking.github.io/2022/11/go%E7%BD%91%E7%BB%9C%E6%8A%93%E5%8C%85%E5%BC%95%E6%B5%81%E5%B7%A5%E5%85%B7goreplay/</link>
      <pubDate>Sat, 12 Nov 2022 22:57:15 +0800</pubDate>
      
      <guid>https://luckytking.github.io/2022/11/go%E7%BD%91%E7%BB%9C%E6%8A%93%E5%8C%85%E5%BC%95%E6%B5%81%E5%B7%A5%E5%85%B7goreplay/</guid>
      <description>&lt;p&gt;æœ¬æ–‡ç®€è¦ä»‹ç»Goç½‘ç»œæŠ“åŒ…ã€å¼•æµå·¥å…·GoReplayã€‚&lt;/p&gt;
&lt;h3 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h3&gt;
&lt;p&gt;åœ¨åç«¯çš„å®é™…å¼€å‘ä¸­ï¼Œä¼šé‡åˆ°ä»¥ä¸‹ä¸€äº›åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·é€šè¿‡ä½œå¼Šæ‰‹æ®µç»•è¿‡å‰ç«¯ï¼Œåˆ©ç”¨æŠ“åŒ…ï¼Œè¿›è¡Œç ´è§£ï¼Œæ¨¡æ‹Ÿï¼Œé­”æ”¹äº¤äº’æ•°æ®è¿›è¡Œä¼ªè£…ã€‚åç«¯ç¨‹åºéœ€è¦å¯¹å…¶æ“ä½œè®°å½•è¿›è¡Œé‡ç°å’Œè·Ÿè¸ªã€‚&lt;/li&gt;
&lt;li&gt;æŸä¸ªbugåœ¨æµ‹è¯•ç¯å¢ƒæ— æ³•å¤ç°ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å‹æµ‹æ•°æ®å’Œçº¿ä¸Šæ•°æ®æœ‰åå·®ï¼Œå‹æµ‹æ•°æ®å¸Œæœ›èƒ½å’Œçº¿ä¸Šæ¥è¿‘ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;GoReplayæ˜¯Goè¯­è¨€ç¼–å†™çš„æµé‡å›æ”¾å·¥å…·ï¼Œä¾¦å¬å™¨æœåŠ¡å™¨æ•è·httpæµé‡å¹¶å°†å…¶å‘é€åˆ°é‡æ”¾æœåŠ¡å™¨æˆ–ä¿å­˜åˆ°æ–‡ä»¶ã€‚é‡æ’­æœåŠ¡å™¨å°†æµé‡è½¬å‘ç»™ç»™å®šçš„åœ°å€ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å®‰è£…&#34;&gt;å®‰è£…&lt;/h3&gt;
&lt;p&gt;æµ‹è¯•ç¯å¢ƒï¼š Windowsã€‚
ç‰ˆæœ¬ï¼š Version:1.3.0
å®‰è£…åˆ†2æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‰ç½®æ¡ä»¶ï¼š å®‰è£…npcap 
&lt;a href=&#34;https://npcap.com&#34;&gt;https://npcap.com&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;GoReplayå¯ä»¥åœ¨Windowsæœºå™¨ä¸Šå·¥ä½œï¼Œä½†ç”±äºWindowså †æ ˆçš„ä¸åŒç½‘ç»œå±‚çš„æ€§è´¨ï¼Œå®ƒæœ‰ä¸€äº›ç»†èŠ‚ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼ŒWindowsä¸åƒUnixç³»ç»Ÿé‚£æ ·æœ‰æ”¯æŒåŒ…æ•è·çš„ç½‘ç»œé©±åŠ¨ç¨‹åºï¼Œå¦‚æœæ‚¨æƒ³æ•è·é€šä¿¡é‡ï¼Œåˆ™å¿…é¡»å•ç‹¬å®‰è£…å®ƒã€‚å…¶ä¸­ä¸€ä¸ªé€‰é¡¹æ˜¯å®‰è£…https://nmap.org/npcap/ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;å®‰è£…ï¼šè¿™é‡Œæµ‹è¯•ä½¿ç”¨çš„æ˜¯ gor-1.3.3_windows.zip
&lt;a href=&#34;https://github.com/buger/goreplay/releases&#34;&gt;https://github.com/buger/goreplay/releases&lt;/a&gt; 
ä¸‹è½½è§£å‹å³å¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;æ•è·æµé‡&#34;&gt;æ•è·æµé‡&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯åŠ¨ä¸¤ä¸ªhttpæœåŠ¡ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;httpServerA: http://localhost:8000 ç›‘å¬ç«¯å£8000&lt;/li&gt;
&lt;li&gt;httpServerB: http://localhost:8001 ç›‘å¬ç«¯å£8001&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è·¯ç”±ä¸º â€œget: &amp;ldquo;/helloworld/{name}&amp;rdquo;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç›‘å¬ç«¯å£8000ï¼Œå¹¶è¾“å‡ºåˆ°stdout&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt; ./gor --input-raw &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;:&lt;/span&gt;8000 --output-stdout
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;æ‰“å¼€æµè§ˆå™¨è¯·æ±‚æ¥å£ http://localhost:8000/helloworld/lilei&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨gorçš„å‘½ä»¤è¡Œçª—å£ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;1 db0a1f4000000001c344a1d3 1668261985986369000 0
GET /helloworld/lilei HTTP/1.1
Host: localhost:8000
Connection: keep-alive
sec-ch-ua: &amp;quot; Not A;Brand&amp;quot;;v=&amp;quot; æ­¤å¤„çœç•¥ä¸€äº›ç³»æ•°
sec-ch-ua-mobile: ?0
sec-ch-ua-platform: &amp;quot;Windows&amp;quot;
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
Sec-Fetch-Site: none
æ­¤å¤„çœç•¥ä¸€äº›å‚æ•°
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯è§ï¼Œgorå·²ç»æŠŠæ•´ä¸ªhttpè¯·æ±‚çš„å®Œæ•´ä¿¡æ¯è®°å½•ä¸‹æ¥ã€‚
åŒæ—¶gorè¿˜æ”¯æŒè¾“å‡ºåˆ°æ–‡ä»¶å’ŒElasticSearchï¼Œè¿›è¡Œå›æ”¾å’Œåˆ†æã€‚è®°å½•åˆ°æ–‡ä»¶request.gor&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt; ./gor --input-raw &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;:&lt;/span&gt;8000 --output&lt;span style=&#34;color:#f92672&#34;&gt;-file&lt;/span&gt; request.gor --input-raw-track-response --input-raw-override-snaplen
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;æ‰“å¼€æµè§ˆå™¨è¯·æ±‚æ¥å£ http://localhost:8000/helloworld/hanmeimei&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å†™å…¥åˆ°æ–‡ä»¶ request_0.gor&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;Mode                 LastWriteTime         Length Name
----                 -------------         ------ ---- 
-a----        2022/11/12     21&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;:&lt;/span&gt;36           1876 request_0.gor
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;request_0 å†…å®¹å¦‚ä¸‹:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-gor&#34; data-lang=&#34;gor&#34;&gt;1 d4571f4000000001b7adc1a6 1668260139796335000 0
GET /helloworld/lilei HTTP/1.1
Host: localhost:8000
Connection: keep-alive
sec-ch-ua: &amp;quot; Not A;Brand&amp;quot;;v=&amp;quot;99&amp;quot;, æ­¤å¤„çœç•¥ä¸€äº›å‚æ•°
sec-ch-ua-mobile: ?0
sec-ch-ua-platform: &amp;quot;Windows&amp;quot;
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64), æ­¤å¤„çœç•¥ä¸€äº›å‚æ•°
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
Sec-Fetch-Site: none
æ­¤å¤„çœç•¥ä¸€äº›å‚æ•°


ğŸµğŸ™ˆğŸ™‰
2 d4571f4000000001b7adc1a6 1668260139796652000 0
HTTP/1.1 200 OK
Content-Type: application/json
Date: Sat, 12 Nov 2022 13:35:39 GMT
Content-Length: 25

{&amp;quot;message&amp;quot;:&amp;quot;Hello lilei&amp;quot;}
ğŸµğŸ™ˆğŸ™‰
1 d4571f4000000001b7adc22b 1668260148757949000 0
GET /helloworld/hanmeimei HTTP/1.1
Host: localhost:8000
Connection: keep-alive
sec-ch-ua: &amp;quot; Not A;Brand&amp;quot;;v=&amp;quot;99&amp;quot;, æ­¤å¤„çœç•¥ä¸€äº›å‚æ•°
sec-ch-ua-mobile: ?0
sec-ch-ua-platform: &amp;quot;Windows&amp;quot;
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) , æ­¤å¤„çœç•¥ä¸€äº›å‚æ•°
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
Sec-Fetch-Site: none
æ­¤å¤„çœç•¥ä¸€äº›å‚æ•°


ğŸµğŸ™ˆğŸ™‰
2 d4571f4000000001b7adc22b 1668260148758268000 0
æ­¤å¤„çœç•¥ä¸€äº›å‚æ•°

{&amp;quot;message&amp;quot;:&amp;quot;Hello hanmeimei&amp;quot;}
ğŸµğŸ™ˆğŸ™‰

&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æµé‡å›æ”¾&#34;&gt;æµé‡å›æ”¾&lt;/h3&gt;
&lt;p&gt;æ¥ç€å°†è¯¥æ–‡ä»¶request_0.gor è¿›è¡Œæµé‡å›æ”¾ï¼Œå¹¶è½¬å‘åˆ°å¦å¤–ä¸€å°æœåŠ¡å™¨ï¼ˆHttpServerBï¼‰ä¸Šï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;./gor --input&lt;span style=&#34;color:#f92672&#34;&gt;-file&lt;/span&gt; request_0.gor --output-http http&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;:&lt;/span&gt;//localhost&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;:&lt;/span&gt;8001
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è§‚å¯ŸHttpServerBæœåŠ¡å™¨æ§åˆ¶å°è¾“å‡ºï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;INFO ts=2022-11-12T21:37:26+08:00 caller=greeter.go:44 service.id=LAPTOP-H3HBMV8A service.name= service.version= trace.id= span.id= msg=CreateGreeter: lilei
INFO ts=2022-11-12T21:37:34+08:00 caller=greeter.go:44 service.id=LAPTOP-H3HBMV8A service.name= service.version= trace.id= span.id= msg=CreateGreeter: hanmeimei

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»æ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªè¯·æ±‚ï¼ˆhttp://localhost:8000/helloworld/ileiã€http://localhost:8000/helloworld/hanmeimeiï¼‰åˆ†åˆ«é‡æ”¾è¯·æ±‚åˆ°äº†HttpServerBã€‚&lt;/p&gt;
&lt;p&gt;goræ”¯æŒè¿›è¡Œæµé‡ç¼©å°ã€æ”¾å¤§ã€å€é€Ÿé‡æ”¾ï¼Œå®ç°çœŸå®æµé‡çš„å‹æµ‹æ•ˆæœã€‚
æ›´å¤šå‘½ä»¤ ./gor -help æŸ¥çœ‹&lt;/p&gt;
&lt;h3 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å®˜æ–¹GitHub  &lt;a href=&#34;https://github.com/buger/goreplay&#34;&gt;https://github.com/buger/goreplay&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å®‰è£…åŒ… &lt;a href=&#34;https://github.com/buger/goreplay/releases&#34;&gt;https://github.com/buger/goreplay/releases&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Windows å®‰è£… &lt;a href=&#34;https://github.com/buger/goreplay/wiki/Running-on-Windows&#34;&gt;https://github.com/buger/goreplay/wiki/Running-on-Windows&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å®˜æ–¹npcap &lt;a href=&#34;https://npcap.com/&#34;&gt;https://npcap.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Goreplayè¯¦è§£ &lt;a href=&#34;https://www.cnblogs.com/sunsky303/p/9072871.html&#34;&gt;https://www.cnblogs.com/sunsky303/p/9072871.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å…¥é—¨å’Œå¯¼å…¥Es  &lt;a href=&#34;https://mp.weixin.qq.com/s/mNjLiEBnHIZhOTrDwNkmvA&#34;&gt;https://mp.weixin.qq.com/s/mNjLiEBnHIZhOTrDwNkmvA&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ç®€ä»‹  &lt;a href=&#34;https://www.jianshu.com/p/0f3bcfbf7874&#34;&gt;https://www.jianshu.com/p/0f3bcfbf7874&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
  </channel>
</rss>
