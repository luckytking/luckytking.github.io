<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    
    <script type="application/ld+json">

{  
  "@context":"http://schema.org",
  "@type":"Website",
  "@id":"https:\/\/luckytking.github.io\/",
  "author": {
    "@type": "Person",
    "name": "jefffff",
    
    "image": "https://luckytking.github.io/images/tk.jpg"
    
  },
  "name":"jefffff\u0027s Blog",
  "description":"\u003cp\u003e在 Kubernetes 中，Kubelet 是在每个节点上运行的重要组件之一，它负责管理容器的生命周期。而 CRI（Container Runtime Interface）则是 Kubelet 用于与容器运行时进行通信的接口（如下图）。\u003c\/p\u003e\n\u003cp\u003eCRI 采用了 ProtoBuffer 和 gPRC，规定 kubelet 该如何调用容器运行时去管理容器和镜像，Kubernetes 通过CRI可支持多种类型的OCI容器运行时，例如 docker、contained、CRI-O、runC、fraki和Kata Containers 等）。\u003c\/p\u003e\n\u003cp\u003e为了方便用户进行容器运行时的调试工作，社区提供了 crictl 工具，用于与 CRI 接口进行交互，本文简要介绍如何使用 crictl 对 Kubernetes节点进行调试 。\u003c\/p\u003e\n\u003cp\u003ekubelet-layout：\u003c\/p\u003e\n\u003c!-- raw HTML omitted --\u003e\n\u003cp\u003e\u003cimg src=\u0022\/images\/kubelet-layout.png\u0022 alt=\u0022\u0022\u003e\u003c\/p\u003e\n\u003ch4 id=\u0022安装\u0022\u003e安装\u003c\/h4\u003e\n\u003cblockquote\u003e\n\u003cp\u003e你可以从 cri-tools \u003ca href=\u0022https:\/\/github.com\/kubernetes-sigs\/cri-tools\/releases\u0022\u003e发布页面\u003c\/a\u003e 下载一个压缩的 crictl 归档文件，用于几种不同的架构。 下载与你的 kubernetes 版本相对应的版本。 提取它并将其移动到系统路径上的某个位置，例如 \/usr\/local\/bin\/。\u003c\/p\u003e\n\u003c\/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003e查看版本，验证安装\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\u0022\u003e\u003ccode class=\u0022language-sh\u0022 data-lang=\u0022sh\u0022\u003ecrictl --version\n\u003c\/code\u003e\u003c\/pre\u003e\u003c\/div\u003e\u003cp\u003e输出例如如下，说明安装成功:\u003c\/p\u003e\n\u003cpre tabindex=\u00220\u0022\u003e\u003ccode\u003ecrictl version v1.23.0 \r\n\u003c\/code\u003e\u003c\/pre\u003e\u003ch4 id=\u0022查看或编辑配置\u0022\u003e查看或编辑配置\u003c\/h4\u003e\n\u003cp\u003e要查看或编辑当前配置，请查看或编辑 \/etc\/crictl.yaml 的内容。\u003c\/p\u003e\n\u003cpre tabindex=\u00220\u0022\u003e\u003ccode\u003ecat \/etc\/crictl.yaml\r\nimage-endpoint: unix:\/\/\/var\/run\/image-cri-shim.sock\r\nruntime-endpoint: unix:\/\/\/run\/containerd\/containerd.sock\r\n\u003c\/code\u003e\u003c\/pre\u003e\u003ch4 id=\u0022调试节点\u0022\u003e调试节点\u003c\/h4\u003e\n\u003cul\u003e\n\u003cli\u003e列出运行中的容器：\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\u0022\u003e\u003ccode class=\u0022language-sh\u0022 data-lang=\u0022sh\u0022\u003ecrictl ps\n\u003c\/code\u003e\u003c\/pre\u003e\u003c\/div\u003e\u003cp\u003e例如我们列出k8s集群的所有容器，例如输出：\u003c\/p\u003e\n\u003cpre tabindex=\u00220\u0022\u003e\u003ccode\u003eCONTAINER           IMAGE               CREATED             STATE               NAME                      ATTEMPT             POD ID\r\n508e30da66ce7       7a71aca7b60fc       3 days ago          Running             calico-node               0                   e0ec650992997\r\n9daa288a68426       f822f80398b9a       3 days ago          Running             calico-typha              0                   f5c4bd6471941\r\n300d948e75019       f6bc1b780606f       3 days ago          Running             kube-controller-manager   1                   d5d681744a377\r\n1cfdc1a6726ae       0198979b7707e       3 days ago          Running             kube-scheduler            1                   eb6ff07ees98c\r\n3699c312c56f9       9e6a540eeeb62       3 days ago          Running             kube-proxy                0                   e8707140d12941\r\n4159d7ec37b29       5bc0062e9555c       3 days ago          Running             kube-apiserver            0                   22d043569737f\r\n8f56a047e8627      25f8c7f3da61c       3 days ago          Restart             etcd                      0                   458e540c798c8\r\n\u003c\/code\u003e\u003c\/pre\u003e\u003cp\u003e本例中，etcd容器一直启动，可以使用以下命令获取容器的日志：\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\u0022\u003e\u003ccode class=\u0022language-sh\u0022 data-lang=\u0022sh\u0022\u003ecrictl logs container-id\n\u003c\/code\u003e\u003c\/pre\u003e\u003c\/div\u003e\u003cp\u003e如此，通过日志帮助定位问题。\u003c\/p\u003e\n\u003ch4 id=\u0022更多命令\u0022\u003e更多命令\u003c\/h4\u003e\n\u003cul\u003e\n\u003cli\u003e列出所有的pods\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\u0022\u003e\u003ccode class=\u0022language-sh\u0022 data-lang=\u0022sh\u0022\u003ecrictl pods\n\u003c\/code\u003e\u003c\/pre\u003e\u003c\/div\u003e\u003cul\u003e\n\u003cli\u003e创建容器\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\u0022\u003e\u003ccode class=\u0022language-sh\u0022 data-lang=\u0022sh\u0022\u003ecrictl run --runtime\u003cspan style=\u0022color:#f92672\u0022\u003e=\u003c\/span\u003eremote \u003cspan style=\u0022color:#ae81ff\u0022\u003e\\\n\u003c\/span\u003e\u003cspan style=\u0022color:#ae81ff\u0022\u003e\u003c\/span\u003e  docker.io\/library\/nginx:latest \u003cspan style=\u0022color:#ae81ff\u0022\u003e\\\n\u003c\/span\u003e\u003cspan style=\u0022color:#ae81ff\u0022\u003e\u003c\/span\u003e  nginx-container\n\u003c\/code\u003e\u003c\/pre\u003e\u003c\/div\u003e\u003cp\u003eps:使用远程容器CRI来使用最新的 nginx 镜像启动nginx-container的容器。\u003c\/p\u003e\n\u003cul\u003e\n\u003cli\u003e删除容器：\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003ecrictl rm nginx-container\n\u003c\/code\u003e\u003c\/pre\u003e\u003c\/div\u003e\u003cul\u003e\n\u003cli\u003e列出所有镜像：\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\u0022\u003e\u003ccode class=\u0022language-sh\u0022 data-lang=\u0022sh\u0022\u003ecrictl images\n\u003c\/code\u003e\u003c\/pre\u003e\u003c\/div\u003e\u003cul\u003e\n\u003cli\u003e帮助\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\u0022\u003e\u003ccode class=\u0022language-sh\u0022 data-lang=\u0022sh\u0022\u003e crictl -h \nNAME:\n   crictl - client \u003cspan style=\u0022color:#66d9ef\u0022\u003efor\u003c\/span\u003e CRI\n\nUSAGE:\n   crictl \u003cspan style=\u0022color:#f92672\u0022\u003e[\u003c\/span\u003eglobal options\u003cspan style=\u0022color:#f92672\u0022\u003e]\u003c\/span\u003e command \u003cspan style=\u0022color:#f92672\u0022\u003e[\u003c\/span\u003ecommand options\u003cspan style=\u0022color:#f92672\u0022\u003e]\u003c\/span\u003e \u003cspan style=\u0022color:#f92672\u0022\u003e[\u003c\/span\u003earguments...\u003cspan style=\u0022color:#f92672\u0022\u003e]\u003c\/span\u003e\n\nVERSION:\n   v1.23.0\n\nCOMMANDS:\n   attach              Attach to a running container\n   create              Create a new container\n   exec                Run a command in a running container\n   version             Display runtime version information\n   images, image, img  List images\n   inspect             Display the status of one or more containers\n   inspecti            Return the status of one or more images\n   imagefsinfo         Return image filesystem info\n   inspectp            Display the status of one or more pods\n   logs                Fetch the logs of a container\n   port-forward        Forward local port to a pod\n   ps                  List containers\n   pull                Pull an image from a registry\n   run                 Run a new container inside a sandbox\n   runp                Run a new pod\n   rm                  Remove one or more containers\n   rmi                 Remove one or more images\n   rmp                 Remove one or more pods\n   pods                List pods\n   start               Start one or more created containers\n   info                Display information of the container runtime\n   stop                Stop one or more running containers\n   stopp               Stop one or more running pods\n   update              Update one or more running containers\n   config              Get and set crictl client configuration options\n   stats               List container\u003cspan style=\u0022color:#f92672\u0022\u003e(\u003c\/span\u003es\u003cspan style=\u0022color:#f92672\u0022\u003e)\u003c\/span\u003e resource usage statistics\n   completion          Output shell completion code\n   help, h             Shows a list of commands or help \u003cspan style=\u0022color:#66d9ef\u0022\u003efor\u003c\/span\u003e one command\n\nGLOBAL OPTIONS:\n   --config value, -c value            Location of the client config file. If not specified and the default does not exist, the program\u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#39;s directory is searched as well (default: \u0026#34;\/etc\/crictl.yaml\u0026#34;) [$CRI_CONFIG_FILE]\n\u003c\/span\u003e\u003cspan style=\u0022color:#e6db74\u0022\u003e   --debug, -D                         Enable debug mode (default: false)\n\u003c\/span\u003e\u003cspan style=\u0022color:#e6db74\u0022\u003e   --image-endpoint value, -i value    Endpoint of CRI image manager service (default: uses \u0026#39;\u003c\/span\u003eruntime-endpoint\u003cspan style=\u0022color:#960050;background-color:#1e0010\u0022\u003e\u0026#39;\u003c\/span\u003e setting\u003cspan style=\u0022color:#f92672\u0022\u003e)\u003c\/span\u003e \u003cspan style=\u0022color:#f92672\u0022\u003e[\u003c\/span\u003e$IMAGE_SERVICE_ENDPOINT\u003cspan style=\u0022color:#f92672\u0022\u003e]\u003c\/span\u003e\n   --runtime-endpoint value, -r value  Endpoint of CRI container runtime service \u003cspan style=\u0022color:#f92672\u0022\u003e(\u003c\/span\u003edefault: uses in order the first successful one of \u003cspan style=\u0022color:#f92672\u0022\u003e[\u003c\/span\u003eunix:\/\/\/var\/run\/dockershim.sock unix:\/\/\/run\/containerd\/containerd.sock unix:\/\/\/run\/crio\/crio.sock unix:\/\/\/var\/run\/cri-dockerd.sock\u003cspan style=\u0022color:#f92672\u0022\u003e])\u003c\/span\u003e. Default is now deprecated and the endpoint should be set instead. \u003cspan style=\u0022color:#f92672\u0022\u003e[\u003c\/span\u003e$CONTAINER_RUNTIME_ENDPOINT\u003cspan style=\u0022color:#f92672\u0022\u003e]\u003c\/span\u003e\n   --timeout value, -t value           Timeout of connecting to the server in seconds \u003cspan style=\u0022color:#f92672\u0022\u003e(\u003c\/span\u003ee.g. 2s, 20s.\u003cspan style=\u0022color:#f92672\u0022\u003e)\u003c\/span\u003e. \u003cspan style=\u0022color:#ae81ff\u0022\u003e0\u003c\/span\u003e or less is set to default \u003cspan style=\u0022color:#f92672\u0022\u003e(\u003c\/span\u003edefault: 2s\u003cspan style=\u0022color:#f92672\u0022\u003e)\u003c\/span\u003e\n   --help, -h                          show help \u003cspan style=\u0022color:#f92672\u0022\u003e(\u003c\/span\u003edefault: false\u003cspan style=\u0022color:#f92672\u0022\u003e)\u003c\/span\u003e\n   --version, -v                       print the version \u003cspan style=\u0022color:#f92672\u0022\u003e(\u003c\/span\u003edefault: false\u003cspan style=\u0022color:#f92672\u0022\u003e)\u003c\/span\u003e\n\u003c\/code\u003e\u003c\/pre\u003e\u003c\/div\u003e\u003cp\u003e以上。\u003c\/p\u003e\n\u003ch3 id=\u0022参考\u0022\u003e参考\u003c\/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\u0022https:\/\/kubernetes.io\/zh-cn\/docs\/tasks\/debug\/debug-cluster\/crictl\/\u0022\u003ekubernetes.io 使用 crictl 对 Kubernetes 节点进行调试\u003c\/a\u003e\u003c\/li\u003e\n\u003cli\u003e\u003ca href=\u0022%C2%A0https:\/\/item.jd.com\/13140598.html\u0022\u003e《Kubernetes进阶实战-第2版》CRI 与OCI \u003c\/a\u003e\n \u003c\/li\u003e\n\u003c\/ul\u003e",
  "url":"https:\/\/luckytking.github.io\/2023\/03\/cri%E4%B8%8E%E4%BD%BF%E7%94%A8crictl%E8%B0%83%E8%AF%95k8s%E8%8A%82%E7%82%B9\/",
  "keywords":"[k8s, CRI, crictl]"
}

</script>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.89.2 with theme Tranquilpeak 0.5.3-BETA">
<meta name="author" content="jefffff">
<meta name="keywords" content="k8s, CRI, crictl">
<meta name="description" content="在 Kubernetes 中，Kubelet 是在每个节点上运行的重要组件之一，它负责管理容器的生命周期。而 CRI（Container Runtime Interface）则是 Kubelet 用于与容器运行时进行通信的接口（如下图）。
CRI 采用了 ProtoBuffer 和 gPRC，规定 kubelet 该如何调用容器运行时去管理容器和镜像，Kubernetes 通过CRI可支持多种类型的OCI容器运行时，例如 docker、contained、CRI-O、runC、fraki和Kata Containers 等）。
为了方便用户进行容器运行时的调试工作，社区提供了 crictl 工具，用于与 CRI 接口进行交互，本文简要介绍如何使用 crictl 对 Kubernetes节点进行调试 。
kubelet-layout：


安装

你可以从 cri-tools 发布页面 下载一个压缩的 crictl 归档文件，用于几种不同的架构。 下载与你的 kubernetes 版本相对应的版本。 提取它并将其移动到系统路径上的某个位置，例如 /usr/local/bin/。


查看版本，验证安装

crictl --version
输出例如如下，说明安装成功:
crictl version v1.23.0 
查看或编辑配置
要查看或编辑当前配置，请查看或编辑 /etc/crictl.yaml 的内容。
cat /etc/crictl.yaml
image-endpoint: unix:///var/run/image-cri-shim.sock
runtime-endpoint: unix:///run/containerd/containerd.sock
调试节点

列出运行中的容器：

crictl ps
例如我们列出k8s集群的所有容器，例如输出：
CONTAINER           IMAGE               CREATED             STATE               NAME                      ATTEMPT             POD ID
508e30da66ce7       7a71aca7b60fc       3 days ago          Running             calico-node               0                   e0ec650992997
9daa288a68426       f822f80398b9a       3 days ago          Running             calico-typha              0                   f5c4bd6471941
300d948e75019       f6bc1b780606f       3 days ago          Running             kube-controller-manager   1                   d5d681744a377
1cfdc1a6726ae       0198979b7707e       3 days ago          Running             kube-scheduler            1                   eb6ff07ees98c
3699c312c56f9       9e6a540eeeb62       3 days ago          Running             kube-proxy                0                   e8707140d12941
4159d7ec37b29       5bc0062e9555c       3 days ago          Running             kube-apiserver            0                   22d043569737f
8f56a047e8627      25f8c7f3da61c       3 days ago          Restart             etcd                      0                   458e540c798c8
本例中，etcd容器一直启动，可以使用以下命令获取容器的日志：
crictl logs container-id
如此，通过日志帮助定位问题。
更多命令

列出所有的pods

crictl pods

创建容器

crictl run --runtime=remote \
  docker.io/library/nginx:latest \
  nginx-container
ps:使用远程容器CRI来使用最新的 nginx 镜像启动nginx-container的容器。

删除容器：

crictl rm nginx-container

列出所有镜像：

crictl images

帮助

 crictl -h 
NAME:
   crictl - client for CRI

USAGE:
   crictl [global options] command [command options] [arguments...]

VERSION:
   v1.23.0

COMMANDS:
   attach              Attach to a running container
   create              Create a new container
   exec                Run a command in a running container
   version             Display runtime version information
   images, image, img  List images
   inspect             Display the status of one or more containers
   inspecti            Return the status of one or more images
   imagefsinfo         Return image filesystem info
   inspectp            Display the status of one or more pods
   logs                Fetch the logs of a container
   port-forward        Forward local port to a pod
   ps                  List containers
   pull                Pull an image from a registry
   run                 Run a new container inside a sandbox
   runp                Run a new pod
   rm                  Remove one or more containers
   rmi                 Remove one or more images
   rmp                 Remove one or more pods
   pods                List pods
   start               Start one or more created containers
   info                Display information of the container runtime
   stop                Stop one or more running containers
   stopp               Stop one or more running pods
   update              Update one or more running containers
   config              Get and set crictl client configuration options
   stats               List container(s) resource usage statistics
   completion          Output shell completion code
   help, h             Shows a list of commands or help for one command

GLOBAL OPTIONS:
   --config value, -c value            Location of the client config file. If not specified and the default does not exist, the program&#39;s directory is searched as well (default: &#34;/etc/crictl.yaml&#34;) [$CRI_CONFIG_FILE]
   --debug, -D                         Enable debug mode (default: false)
   --image-endpoint value, -i value    Endpoint of CRI image manager service (default: uses &#39;runtime-endpoint&#39; setting) [$IMAGE_SERVICE_ENDPOINT]
   --runtime-endpoint value, -r value  Endpoint of CRI container runtime service (default: uses in order the first successful one of [unix:///var/run/dockershim.sock unix:///run/containerd/containerd.sock unix:///run/crio/crio.sock unix:///var/run/cri-dockerd.sock]). Default is now deprecated and the endpoint should be set instead. [$CONTAINER_RUNTIME_ENDPOINT]
   --timeout value, -t value           Timeout of connecting to the server in seconds (e.g. 2s, 20s.). 0 or less is set to default (default: 2s)
   --help, -h                          show help (default: false)
   --version, -v                       print the version (default: false)
以上。
参考

kubernetes.io 使用 crictl 对 Kubernetes 节点进行调试
《Kubernetes进阶实战-第2版》CRI 与OCI 
 
">


<meta property="og:description" content="在 Kubernetes 中，Kubelet 是在每个节点上运行的重要组件之一，它负责管理容器的生命周期。而 CRI（Container Runtime Interface）则是 Kubelet 用于与容器运行时进行通信的接口（如下图）。
CRI 采用了 ProtoBuffer 和 gPRC，规定 kubelet 该如何调用容器运行时去管理容器和镜像，Kubernetes 通过CRI可支持多种类型的OCI容器运行时，例如 docker、contained、CRI-O、runC、fraki和Kata Containers 等）。
为了方便用户进行容器运行时的调试工作，社区提供了 crictl 工具，用于与 CRI 接口进行交互，本文简要介绍如何使用 crictl 对 Kubernetes节点进行调试 。
kubelet-layout：


安装

你可以从 cri-tools 发布页面 下载一个压缩的 crictl 归档文件，用于几种不同的架构。 下载与你的 kubernetes 版本相对应的版本。 提取它并将其移动到系统路径上的某个位置，例如 /usr/local/bin/。


查看版本，验证安装

crictl --version
输出例如如下，说明安装成功:
crictl version v1.23.0 
查看或编辑配置
要查看或编辑当前配置，请查看或编辑 /etc/crictl.yaml 的内容。
cat /etc/crictl.yaml
image-endpoint: unix:///var/run/image-cri-shim.sock
runtime-endpoint: unix:///run/containerd/containerd.sock
调试节点

列出运行中的容器：

crictl ps
例如我们列出k8s集群的所有容器，例如输出：
CONTAINER           IMAGE               CREATED             STATE               NAME                      ATTEMPT             POD ID
508e30da66ce7       7a71aca7b60fc       3 days ago          Running             calico-node               0                   e0ec650992997
9daa288a68426       f822f80398b9a       3 days ago          Running             calico-typha              0                   f5c4bd6471941
300d948e75019       f6bc1b780606f       3 days ago          Running             kube-controller-manager   1                   d5d681744a377
1cfdc1a6726ae       0198979b7707e       3 days ago          Running             kube-scheduler            1                   eb6ff07ees98c
3699c312c56f9       9e6a540eeeb62       3 days ago          Running             kube-proxy                0                   e8707140d12941
4159d7ec37b29       5bc0062e9555c       3 days ago          Running             kube-apiserver            0                   22d043569737f
8f56a047e8627      25f8c7f3da61c       3 days ago          Restart             etcd                      0                   458e540c798c8
本例中，etcd容器一直启动，可以使用以下命令获取容器的日志：
crictl logs container-id
如此，通过日志帮助定位问题。
更多命令

列出所有的pods

crictl pods

创建容器

crictl run --runtime=remote \
  docker.io/library/nginx:latest \
  nginx-container
ps:使用远程容器CRI来使用最新的 nginx 镜像启动nginx-container的容器。

删除容器：

crictl rm nginx-container

列出所有镜像：

crictl images

帮助

 crictl -h 
NAME:
   crictl - client for CRI

USAGE:
   crictl [global options] command [command options] [arguments...]

VERSION:
   v1.23.0

COMMANDS:
   attach              Attach to a running container
   create              Create a new container
   exec                Run a command in a running container
   version             Display runtime version information
   images, image, img  List images
   inspect             Display the status of one or more containers
   inspecti            Return the status of one or more images
   imagefsinfo         Return image filesystem info
   inspectp            Display the status of one or more pods
   logs                Fetch the logs of a container
   port-forward        Forward local port to a pod
   ps                  List containers
   pull                Pull an image from a registry
   run                 Run a new container inside a sandbox
   runp                Run a new pod
   rm                  Remove one or more containers
   rmi                 Remove one or more images
   rmp                 Remove one or more pods
   pods                List pods
   start               Start one or more created containers
   info                Display information of the container runtime
   stop                Stop one or more running containers
   stopp               Stop one or more running pods
   update              Update one or more running containers
   config              Get and set crictl client configuration options
   stats               List container(s) resource usage statistics
   completion          Output shell completion code
   help, h             Shows a list of commands or help for one command

GLOBAL OPTIONS:
   --config value, -c value            Location of the client config file. If not specified and the default does not exist, the program&#39;s directory is searched as well (default: &#34;/etc/crictl.yaml&#34;) [$CRI_CONFIG_FILE]
   --debug, -D                         Enable debug mode (default: false)
   --image-endpoint value, -i value    Endpoint of CRI image manager service (default: uses &#39;runtime-endpoint&#39; setting) [$IMAGE_SERVICE_ENDPOINT]
   --runtime-endpoint value, -r value  Endpoint of CRI container runtime service (default: uses in order the first successful one of [unix:///var/run/dockershim.sock unix:///run/containerd/containerd.sock unix:///run/crio/crio.sock unix:///var/run/cri-dockerd.sock]). Default is now deprecated and the endpoint should be set instead. [$CONTAINER_RUNTIME_ENDPOINT]
   --timeout value, -t value           Timeout of connecting to the server in seconds (e.g. 2s, 20s.). 0 or less is set to default (default: 2s)
   --help, -h                          show help (default: false)
   --version, -v                       print the version (default: false)
以上。
参考

kubernetes.io 使用 crictl 对 Kubernetes 节点进行调试
《Kubernetes进阶实战-第2版》CRI 与OCI 
 
">
<meta property="og:type" content="article">
<meta property="og:title" content="CRI与使用crictl调试k8s节点">
<meta name="twitter:title" content="CRI与使用crictl调试k8s节点">
<meta property="og:url" content="https://luckytking.github.io/2023/03/cri%E4%B8%8E%E4%BD%BF%E7%94%A8crictl%E8%B0%83%E8%AF%95k8s%E8%8A%82%E7%82%B9/">
<meta property="twitter:url" content="https://luckytking.github.io/2023/03/cri%E4%B8%8E%E4%BD%BF%E7%94%A8crictl%E8%B0%83%E8%AF%95k8s%E8%8A%82%E7%82%B9/">
<meta property="og:site_name" content="jefffff&#39;s Blog">
<meta property="og:description" content="在 Kubernetes 中，Kubelet 是在每个节点上运行的重要组件之一，它负责管理容器的生命周期。而 CRI（Container Runtime Interface）则是 Kubelet 用于与容器运行时进行通信的接口（如下图）。
CRI 采用了 ProtoBuffer 和 gPRC，规定 kubelet 该如何调用容器运行时去管理容器和镜像，Kubernetes 通过CRI可支持多种类型的OCI容器运行时，例如 docker、contained、CRI-O、runC、fraki和Kata Containers 等）。
为了方便用户进行容器运行时的调试工作，社区提供了 crictl 工具，用于与 CRI 接口进行交互，本文简要介绍如何使用 crictl 对 Kubernetes节点进行调试 。
kubelet-layout：


安装

你可以从 cri-tools 发布页面 下载一个压缩的 crictl 归档文件，用于几种不同的架构。 下载与你的 kubernetes 版本相对应的版本。 提取它并将其移动到系统路径上的某个位置，例如 /usr/local/bin/。


查看版本，验证安装

crictl --version
输出例如如下，说明安装成功:
crictl version v1.23.0 
查看或编辑配置
要查看或编辑当前配置，请查看或编辑 /etc/crictl.yaml 的内容。
cat /etc/crictl.yaml
image-endpoint: unix:///var/run/image-cri-shim.sock
runtime-endpoint: unix:///run/containerd/containerd.sock
调试节点

列出运行中的容器：

crictl ps
例如我们列出k8s集群的所有容器，例如输出：
CONTAINER           IMAGE               CREATED             STATE               NAME                      ATTEMPT             POD ID
508e30da66ce7       7a71aca7b60fc       3 days ago          Running             calico-node               0                   e0ec650992997
9daa288a68426       f822f80398b9a       3 days ago          Running             calico-typha              0                   f5c4bd6471941
300d948e75019       f6bc1b780606f       3 days ago          Running             kube-controller-manager   1                   d5d681744a377
1cfdc1a6726ae       0198979b7707e       3 days ago          Running             kube-scheduler            1                   eb6ff07ees98c
3699c312c56f9       9e6a540eeeb62       3 days ago          Running             kube-proxy                0                   e8707140d12941
4159d7ec37b29       5bc0062e9555c       3 days ago          Running             kube-apiserver            0                   22d043569737f
8f56a047e8627      25f8c7f3da61c       3 days ago          Restart             etcd                      0                   458e540c798c8
本例中，etcd容器一直启动，可以使用以下命令获取容器的日志：
crictl logs container-id
如此，通过日志帮助定位问题。
更多命令

列出所有的pods

crictl pods

创建容器

crictl run --runtime=remote \
  docker.io/library/nginx:latest \
  nginx-container
ps:使用远程容器CRI来使用最新的 nginx 镜像启动nginx-container的容器。

删除容器：

crictl rm nginx-container

列出所有镜像：

crictl images

帮助

 crictl -h 
NAME:
   crictl - client for CRI

USAGE:
   crictl [global options] command [command options] [arguments...]

VERSION:
   v1.23.0

COMMANDS:
   attach              Attach to a running container
   create              Create a new container
   exec                Run a command in a running container
   version             Display runtime version information
   images, image, img  List images
   inspect             Display the status of one or more containers
   inspecti            Return the status of one or more images
   imagefsinfo         Return image filesystem info
   inspectp            Display the status of one or more pods
   logs                Fetch the logs of a container
   port-forward        Forward local port to a pod
   ps                  List containers
   pull                Pull an image from a registry
   run                 Run a new container inside a sandbox
   runp                Run a new pod
   rm                  Remove one or more containers
   rmi                 Remove one or more images
   rmp                 Remove one or more pods
   pods                List pods
   start               Start one or more created containers
   info                Display information of the container runtime
   stop                Stop one or more running containers
   stopp               Stop one or more running pods
   update              Update one or more running containers
   config              Get and set crictl client configuration options
   stats               List container(s) resource usage statistics
   completion          Output shell completion code
   help, h             Shows a list of commands or help for one command

GLOBAL OPTIONS:
   --config value, -c value            Location of the client config file. If not specified and the default does not exist, the program&#39;s directory is searched as well (default: &#34;/etc/crictl.yaml&#34;) [$CRI_CONFIG_FILE]
   --debug, -D                         Enable debug mode (default: false)
   --image-endpoint value, -i value    Endpoint of CRI image manager service (default: uses &#39;runtime-endpoint&#39; setting) [$IMAGE_SERVICE_ENDPOINT]
   --runtime-endpoint value, -r value  Endpoint of CRI container runtime service (default: uses in order the first successful one of [unix:///var/run/dockershim.sock unix:///run/containerd/containerd.sock unix:///run/crio/crio.sock unix:///var/run/cri-dockerd.sock]). Default is now deprecated and the endpoint should be set instead. [$CONTAINER_RUNTIME_ENDPOINT]
   --timeout value, -t value           Timeout of connecting to the server in seconds (e.g. 2s, 20s.). 0 or less is set to default (default: 2s)
   --help, -h                          show help (default: false)
   --version, -v                       print the version (default: false)
以上。
参考

kubernetes.io 使用 crictl 对 Kubernetes 节点进行调试
《Kubernetes进阶实战-第2版》CRI 与OCI 
 
">
<meta name="twitter:description" content="在 Kubernetes 中，Kubelet 是在每个节点上运行的重要组件之一，它负责管理容器的生命周期。而 CRI（Container Runtime Interface）则是 Kubelet 用于与容器运行时进行通信的接口（如下图）。
CRI 采用了 ProtoBuffer 和 gPRC，规定 kubelet 该如何调用容器运行时去管理容器和镜像，Kubernetes 通过CRI可支持多种类型的OCI容器运行时，例如 docker、contained、CRI-O、runC、fraki和Kata Containers 等）。
为了方便用户进行容器运行时的调试工作，社区提供了 crictl 工具，用于与 CRI 接口进行交互，本文简要介绍如何使用 crictl 对 Kubernetes节点进行调试 。
kubelet-layout：


安装

你可以从 cri-tools 发布页面 下载一个压缩的 crictl 归档文件，用于几种不同的架构。 下载与你的 kubernetes 版本相对应的版本。 提取它并将其移动到系统路径上的某个位置，例如 /usr/local/bin/。


查看版本，验证安装

crictl --version
输出例如如下，说明安装成功:
crictl version v1.23.0 
查看或编辑配置
要查看或编辑当前配置，请查看或编辑 /etc/crictl.yaml 的内容。
cat /etc/crictl.yaml
image-endpoint: unix:///var/run/image-cri-shim.sock
runtime-endpoint: unix:///run/containerd/containerd.sock
调试节点

列出运行中的容器：

crictl ps
例如我们列出k8s集群的所有容器，例如输出：
CONTAINER           IMAGE               CREATED             STATE               NAME                      ATTEMPT             POD ID
508e30da66ce7       7a71aca7b60fc       3 days ago          Running             calico-node               0                   e0ec650992997
9daa288a68426       f822f80398b9a       3 days ago          Running             calico-typha              0                   f5c4bd6471941
300d948e75019       f6bc1b780606f       3 days ago          Running             kube-controller-manager   1                   d5d681744a377
1cfdc1a6726ae       0198979b7707e       3 days ago          Running             kube-scheduler            1                   eb6ff07ees98c
3699c312c56f9       9e6a540eeeb62       3 days ago          Running             kube-proxy                0                   e8707140d12941
4159d7ec37b29       5bc0062e9555c       3 days ago          Running             kube-apiserver            0                   22d043569737f
8f56a047e8627      25f8c7f3da61c       3 days ago          Restart             etcd                      0                   458e540c798c8
本例中，etcd容器一直启动，可以使用以下命令获取容器的日志：
crictl logs container-id
如此，通过日志帮助定位问题。
更多命令

列出所有的pods

crictl pods

创建容器

crictl run --runtime=remote \
  docker.io/library/nginx:latest \
  nginx-container
ps:使用远程容器CRI来使用最新的 nginx 镜像启动nginx-container的容器。

删除容器：

crictl rm nginx-container

列出所有镜像：

crictl images

帮助

 crictl -h 
NAME:
   crictl - client for CRI

USAGE:
   crictl [global options] command [command options] [arguments...]

VERSION:
   v1.23.0

COMMANDS:
   attach              Attach to a running container
   create              Create a new container
   exec                Run a command in a running container
   version             Display runtime version information
   images, image, img  List images
   inspect             Display the status of one or more containers
   inspecti            Return the status of one or more images
   imagefsinfo         Return image filesystem info
   inspectp            Display the status of one or more pods
   logs                Fetch the logs of a container
   port-forward        Forward local port to a pod
   ps                  List containers
   pull                Pull an image from a registry
   run                 Run a new container inside a sandbox
   runp                Run a new pod
   rm                  Remove one or more containers
   rmi                 Remove one or more images
   rmp                 Remove one or more pods
   pods                List pods
   start               Start one or more created containers
   info                Display information of the container runtime
   stop                Stop one or more running containers
   stopp               Stop one or more running pods
   update              Update one or more running containers
   config              Get and set crictl client configuration options
   stats               List container(s) resource usage statistics
   completion          Output shell completion code
   help, h             Shows a list of commands or help for one command

GLOBAL OPTIONS:
   --config value, -c value            Location of the client config file. If not specified and the default does not exist, the program&#39;s directory is searched as well (default: &#34;/etc/crictl.yaml&#34;) [$CRI_CONFIG_FILE]
   --debug, -D                         Enable debug mode (default: false)
   --image-endpoint value, -i value    Endpoint of CRI image manager service (default: uses &#39;runtime-endpoint&#39; setting) [$IMAGE_SERVICE_ENDPOINT]
   --runtime-endpoint value, -r value  Endpoint of CRI container runtime service (default: uses in order the first successful one of [unix:///var/run/dockershim.sock unix:///run/containerd/containerd.sock unix:///run/crio/crio.sock unix:///var/run/cri-dockerd.sock]). Default is now deprecated and the endpoint should be set instead. [$CONTAINER_RUNTIME_ENDPOINT]
   --timeout value, -t value           Timeout of connecting to the server in seconds (e.g. 2s, 20s.). 0 or less is set to default (default: 2s)
   --help, -h                          show help (default: false)
   --version, -v                       print the version (default: false)
以上。
参考

kubernetes.io 使用 crictl 对 Kubernetes 节点进行调试
《Kubernetes进阶实战-第2版》CRI 与OCI 
 
">
<meta property="og:locale" content="en">

  
    <meta property="article:published_time" content="2023-03-12T17:24:41">
  
  
    <meta property="article:modified_time" content="2023-03-12T17:24:41">
  
  
  
    
      <meta property="article:section" content="k8s">
    
  
  
    
      <meta property="article:tag" content="k8s">
    
      <meta property="article:tag" content="CRI">
    
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@none">


  <meta name="twitter:creator" content="@none">






  <meta property="og:image" content="https://luckytking.github.io/images/tk.jpg">
  <meta property="twitter:image" content="https://luckytking.github.io/images/tk.jpg">






    <title>CRI与使用crictl调试k8s节点</title>

    <link rel="icon" href="https://luckytking.github.io/favicon.jpg">
    

    
      <link rel="publisher" href="https://plus.google.com/&#43;thibaudlepretre">
    

    <link rel="canonical" href="https://luckytking.github.io/2023/03/cri%E4%B8%8E%E4%BD%BF%E7%94%A8crictl%E8%B0%83%E8%AF%95k8s%E8%8A%82%E7%82%B9/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    
    
    <link rel="stylesheet" href="https://luckytking.github.io/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://luckytking.github.io/" aria-label="">jefffff&#39;s Blog</a>
  </div>
  
    
      <a class="header-right-icon open-algolia-search"
         href="https://luckytking.github.io/#search" aria-label="">
    
    
      <i class="fa fa-lg fa-search"></i>
    
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://luckytking.github.io/#about" aria-label="">
          <img class="sidebar-profile-picture" src="https://luckytking.github.io/images/tk.jpg" alt="" />
        </a>
        <h4 class="sidebar-profile-name">jefffff</h4>
        
          <h5 class="sidebar-profile-bio">Stay hungry. Stay Foolish  <strong>COOL</strong></h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://luckytking.github.io/" title="Home">
    
      <i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://luckytking.github.io/categories" title="Categories">
    
      <i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://luckytking.github.io/tags" title="Tags">
    
      <i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://luckytking.github.io/archives" title="Archives">
    
      <i class="sidebar-button-icon fas fa-lg fa-archive" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://luckytking.github.io/#about" title="About">
    
      <i class="sidebar-button-icon fas fa-lg fa-question" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/luckytking" target="_blank" rel="noopener" title="GitHub">
    
      <i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://luckytking.github.io/index.xml" title="RSS">
    
      <i class="sidebar-button-icon fas fa-lg fa-rss" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="5"
        class="
               hasCoverMetaIn
               ">
        <article class="post" id="top">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title">
      CRI与使用crictl调试k8s节点
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2023-03-12T17:24:41&#43;08:00">
        
   12, 2023

      </time>
    
    
  
  
    <span></span>
    
      <a class="category-link" href="https://luckytking.github.io/categories/k8s">k8s</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <p>在 Kubernetes 中，Kubelet 是在每个节点上运行的重要组件之一，它负责管理容器的生命周期。而 CRI（Container Runtime Interface）则是 Kubelet 用于与容器运行时进行通信的接口（如下图）。</p>
<p>CRI 采用了 ProtoBuffer 和 gPRC，规定 kubelet 该如何调用容器运行时去管理容器和镜像，Kubernetes 通过CRI可支持多种类型的OCI容器运行时，例如 docker、contained、CRI-O、runC、fraki和Kata Containers 等）。</p>
<p>为了方便用户进行容器运行时的调试工作，社区提供了 crictl 工具，用于与 CRI 接口进行交互，本文简要介绍如何使用 crictl 对 Kubernetes节点进行调试 。</p>
<p>kubelet-layout：</p>
<!-- raw HTML omitted -->
<p><img src="https://luckytking.github.io/images/kubelet-layout.png" alt=""></p>
<h4 id="安装">安装</h4>
<blockquote>
<p>你可以从 cri-tools <a href="https://github.com/kubernetes-sigs/cri-tools/releases">发布页面</a> 下载一个压缩的 crictl 归档文件，用于几种不同的架构。 下载与你的 kubernetes 版本相对应的版本。 提取它并将其移动到系统路径上的某个位置，例如 /usr/local/bin/。</p>
</blockquote>
<ul>
<li>查看版本，验证安装</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">crictl --version
</code></pre></div><p>输出例如如下，说明安装成功:</p>
<pre tabindex="0"><code>crictl version v1.23.0 
</code></pre><h4 id="查看或编辑配置">查看或编辑配置</h4>
<p>要查看或编辑当前配置，请查看或编辑 /etc/crictl.yaml 的内容。</p>
<pre tabindex="0"><code>cat /etc/crictl.yaml
image-endpoint: unix:///var/run/image-cri-shim.sock
runtime-endpoint: unix:///run/containerd/containerd.sock
</code></pre><h4 id="调试节点">调试节点</h4>
<ul>
<li>列出运行中的容器：</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">crictl ps
</code></pre></div><p>例如我们列出k8s集群的所有容器，例如输出：</p>
<pre tabindex="0"><code>CONTAINER           IMAGE               CREATED             STATE               NAME                      ATTEMPT             POD ID
508e30da66ce7       7a71aca7b60fc       3 days ago          Running             calico-node               0                   e0ec650992997
9daa288a68426       f822f80398b9a       3 days ago          Running             calico-typha              0                   f5c4bd6471941
300d948e75019       f6bc1b780606f       3 days ago          Running             kube-controller-manager   1                   d5d681744a377
1cfdc1a6726ae       0198979b7707e       3 days ago          Running             kube-scheduler            1                   eb6ff07ees98c
3699c312c56f9       9e6a540eeeb62       3 days ago          Running             kube-proxy                0                   e8707140d12941
4159d7ec37b29       5bc0062e9555c       3 days ago          Running             kube-apiserver            0                   22d043569737f
8f56a047e8627      25f8c7f3da61c       3 days ago          Restart             etcd                      0                   458e540c798c8
</code></pre><p>本例中，etcd容器一直启动，可以使用以下命令获取容器的日志：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">crictl logs container-id
</code></pre></div><p>如此，通过日志帮助定位问题。</p>
<h4 id="更多命令">更多命令</h4>
<ul>
<li>列出所有的pods</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">crictl pods
</code></pre></div><ul>
<li>创建容器</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">crictl run --runtime<span style="color:#f92672">=</span>remote <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  docker.io/library/nginx:latest <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  nginx-container
</code></pre></div><p>ps:使用远程容器CRI来使用最新的 nginx 镜像启动nginx-container的容器。</p>
<ul>
<li>删除容器：</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">crictl rm nginx-container
</code></pre></div><ul>
<li>列出所有镜像：</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">crictl images
</code></pre></div><ul>
<li>帮助</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"> crictl -h 
NAME:
   crictl - client <span style="color:#66d9ef">for</span> CRI

USAGE:
   crictl <span style="color:#f92672">[</span>global options<span style="color:#f92672">]</span> command <span style="color:#f92672">[</span>command options<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>arguments...<span style="color:#f92672">]</span>

VERSION:
   v1.23.0

COMMANDS:
   attach              Attach to a running container
   create              Create a new container
   exec                Run a command in a running container
   version             Display runtime version information
   images, image, img  List images
   inspect             Display the status of one or more containers
   inspecti            Return the status of one or more images
   imagefsinfo         Return image filesystem info
   inspectp            Display the status of one or more pods
   logs                Fetch the logs of a container
   port-forward        Forward local port to a pod
   ps                  List containers
   pull                Pull an image from a registry
   run                 Run a new container inside a sandbox
   runp                Run a new pod
   rm                  Remove one or more containers
   rmi                 Remove one or more images
   rmp                 Remove one or more pods
   pods                List pods
   start               Start one or more created containers
   info                Display information of the container runtime
   stop                Stop one or more running containers
   stopp               Stop one or more running pods
   update              Update one or more running containers
   config              Get and set crictl client configuration options
   stats               List container<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span> resource usage statistics
   completion          Output shell completion code
   help, h             Shows a list of commands or help <span style="color:#66d9ef">for</span> one command

GLOBAL OPTIONS:
   --config value, -c value            Location of the client config file. If not specified and the default does not exist, the program<span style="color:#e6db74">&#39;s directory is searched as well (default: &#34;/etc/crictl.yaml&#34;) [$CRI_CONFIG_FILE]
</span><span style="color:#e6db74">   --debug, -D                         Enable debug mode (default: false)
</span><span style="color:#e6db74">   --image-endpoint value, -i value    Endpoint of CRI image manager service (default: uses &#39;</span>runtime-endpoint<span style="color:#960050;background-color:#1e0010">&#39;</span> setting<span style="color:#f92672">)</span> <span style="color:#f92672">[</span>$IMAGE_SERVICE_ENDPOINT<span style="color:#f92672">]</span>
   --runtime-endpoint value, -r value  Endpoint of CRI container runtime service <span style="color:#f92672">(</span>default: uses in order the first successful one of <span style="color:#f92672">[</span>unix:///var/run/dockershim.sock unix:///run/containerd/containerd.sock unix:///run/crio/crio.sock unix:///var/run/cri-dockerd.sock<span style="color:#f92672">])</span>. Default is now deprecated and the endpoint should be set instead. <span style="color:#f92672">[</span>$CONTAINER_RUNTIME_ENDPOINT<span style="color:#f92672">]</span>
   --timeout value, -t value           Timeout of connecting to the server in seconds <span style="color:#f92672">(</span>e.g. 2s, 20s.<span style="color:#f92672">)</span>. <span style="color:#ae81ff">0</span> or less is set to default <span style="color:#f92672">(</span>default: 2s<span style="color:#f92672">)</span>
   --help, -h                          show help <span style="color:#f92672">(</span>default: false<span style="color:#f92672">)</span>
   --version, -v                       print the version <span style="color:#f92672">(</span>default: false<span style="color:#f92672">)</span>
</code></pre></div><p>以上。</p>
<h3 id="参考">参考</h3>
<ul>
<li><a href="https://kubernetes.io/zh-cn/docs/tasks/debug/debug-cluster/crictl/">kubernetes.io 使用 crictl 对 Kubernetes 节点进行调试</a></li>
<li><a href="%C2%A0https://item.jd.com/13140598.html">《Kubernetes进阶实战-第2版》CRI 与OCI </a>
 </li>
</ul>
              


            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small"></span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://luckytking.github.io/tags/k8s/">k8s</a>

  <a class="tag tag--primary tag--small" href="https://luckytking.github.io/tags/cri/">CRI</a>

                  </div>
                
              
            
            
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://luckytking.github.io/2023/03/go%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%BA%93robfig-cron%E4%B8%80%E4%BA%9B%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/" data-tooltip="Go定时任务库robfig Cron一些主要功能、实际应用场景" aria-label=": Go定时任务库robfig Cron一些主要功能、实际应用场景">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml"></span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://luckytking.github.io/2023/03/gor%E5%92%8Capisixproxymirror%E5%AE%9E%E7%8E%B0%E6%8D%95%E8%8E%B7%E5%A4%8D%E5%88%B6%E6%B5%81%E9%87%8F/" data-tooltip="Gor和ApisixProxyMirror实现捕获复制流量" aria-label=": Gor和ApisixProxyMirror实现捕获复制流量">
          
              <span class="hide-xs hide-sm text-small icon-mr"></span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
  
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


            
  


          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2023 jefffff. 
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://luckytking.github.io/2023/03/go%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%BA%93robfig-cron%E4%B8%80%E4%BA%9B%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/" data-tooltip="Go定时任务库robfig Cron一些主要功能、实际应用场景" aria-label=": Go定时任务库robfig Cron一些主要功能、实际应用场景">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml"></span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://luckytking.github.io/2023/03/gor%E5%92%8Capisixproxymirror%E5%AE%9E%E7%8E%B0%E6%8D%95%E8%8E%B7%E5%A4%8D%E5%88%B6%E6%B5%81%E9%87%8F/" data-tooltip="Gor和ApisixProxyMirror实现捕获复制流量" aria-label=": Gor和ApisixProxyMirror实现捕获复制流量">
          
              <span class="hide-xs hide-sm text-small icon-mr"></span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
  
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


      </div>
      

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-times"></i>
    </div>
    
      <img id="about-card-picture" src="https://luckytking.github.io/images/tk.jpg" alt="" />
    
    <h4 id="about-card-name">jefffff</h4>
    
      <div id="about-card-bio">Stay hungry. Stay Foolish  <strong>COOL</strong></div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Go backend developer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker-alt"></i>
        <br/>
        China Amoy
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://luckytking.github.io/images/cover-v1.2.0.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js" integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<script src="https://luckytking.github.io/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js"></script>



<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>




    
  </body>
</html>

